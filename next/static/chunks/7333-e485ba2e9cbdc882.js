(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7333],{95169:function(e,t){"use strict";t.Z={src:"/_next/static/media/fly_man.a8c80dce.png",height:220,width:220,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAM1BMVEVMaXHDe2DBbjXZcUrRtKDHfWLGh3PNo6LAYinSkHLCYEEoLiHgqYHJoLPDbjK5TyjTdEzll0igAAAAEHRSTlMAw/xcG1N6D80v507EV0yI4lIpzQAAAAlwSFlzAAALEwAACxMBAJqcGAAAACpJREFUCJljYEAC3FCamYsTTHPyCPCDGSwsHBy87GAmHxMjhMHAyoakFwAXZwClM+Z16gAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},97869:function(e,t,s){"use strict";var n=s(85893),r=s(11355),a=s(59810),l=s(58771),i=s(29607),c=s(97867),o=s(4668),d=s(36499),u=s(11163),m=s(67294),x=s(2664),h=s(98730),f=function(e){var t=e.onDeleted,s=e.selectedHistoryId,f=e.openModal,p=e.setOpenModal,v=(0,m.useRef)(!1),g=(0,x.I0)(),j=(0,i.NT)(),y=(0,u.useRouter)().query,w=y.customerId,N=y.teamId,b=(0,m.useState)(!1),I=b[0],k=b[1];(0,m.useEffect)(function(){return v.current=!0,function(){v.current=!1}},[]);var C=(0,m.useCallback)(function(){k(!0),(0,c.xt)({id:s,customerId:w,teamId:N}).then(function(e){t(e),g((0,h.sc)({status:h.Ez.success,message:"Success"})),p(!1)}).catch(function(e){var t,s,n=null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail;g((0,h.sc)({status:h.Ez.failed,message:null!=n?n:"Failed"}))}).finally(function(){v.current&&k(!1)})},[w,g,t,s,p,N,]);return(0,n.jsx)(r.u.Root,{show:f,as:m.Fragment,children:(0,n.jsx)(a.V,{as:"div",static:!0,className:"fixed z-90 inset-0 overflow-y-auto",onClose:function(){},onClick:function(e){return e.stopPropagation()},children:(0,n.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,n.jsx)(r.u.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,n.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,n.jsx)(r.u.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,n.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[(0,n.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,n.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,n.jsx)(l.Z,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,n.jsx)(a.V.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:j("Delete history")}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete?"})})]})]}),(0,n.jsxs)("div",{className:"w-full sm:ml-auto sm:w-1/2 mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[(0,n.jsx)(o.Z,{className:"w-full sm:ml-3",onClick:C,isLoading:I,children:j("Delete")}),(0,n.jsx)(d.I,{className:"w-full mt-3 sm:mt-0",onClick:function(){return p(!1)},children:j("Cancel")})]})]})})]})})})};t.Z=f},97333:function(e,t,s){"use strict";s.d(t,{Z:function(){return eS}});var n=s(51351),r=s(29815),a=s(85893),l=s(75231),i=s(97867),c=s(36499),o=s(40947),d=s(29607),u=s(72478),m=function(e){var t=e.className,s=e.value,n=e.onChange,r=e.placeholder,l=(0,d.NT)();return(0,a.jsx)("div",{className:(0,u.Z)("w-full md:w-56",void 0===t?"":t),children:(0,a.jsxs)("div",{className:"relative w-full text-sidebar focus-within:text-white",children:[(0,a.jsx)("input",{className:"appearance-none block w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-purple-1 text-sm text-gray-800",placeholder:null!=r?r:l("Search file for folder"),type:"text",autoComplete:"off",value:s,onChange:function(e){return n(e.target.value)}}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-6",children:(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("circle",{cx:"6.6",cy:"6.6",r:"5.6",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M10.6 10.6001L13 13.0001",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})})},x=s(41664),h=s.n(x),f=s(11163),p=s(67294),v=s(2664),g=s(54096),j=s(3976),y=s(59295),w=s(47568),N=s(828),b=s(70655),I=s(51855),k=s(52758),C=s(84874),Z=function(e){var t=e.children,s=(0,p.useState)(1e3),n=s[0],r=s[1],l=(0,p.useState)(0),i=l[0],c=l[1],o=(0,p.useRef)(null),d=(0,p.useCallback)(function(e){if(o.current){var t=o.current.clientWidth;!(t<300)&&("mouseenter"===e.type?(c((300-t)/t*100),r(t/300*4e3)):(c(0),r(500)))}},[o]);return(0,a.jsxs)("div",{className:"overflow-hidden relative h-8 flex items-center",onMouseEnter:d,onMouseLeave:d,style:{width:"".concat(300,"px")},children:[(0,a.jsx)("p",{ref:o,className:"transition-transform ease-linear",style:{transitionDuration:"".concat(n,"ms"),transform:"translateX(".concat(i,"%)"),paddingRight:"30px",paddingLeft:"30px"},children:t}),(0,a.jsx)("div",{className:"absolute top-0 left-0 h-full w-12 bg-white-left-arrow"}),(0,a.jsx)("div",{className:"absolute top-0 right-0 h-full w-12 bg-white-right-arrow"})]})},_=s(94184),L=s.n(_),S=function(e){var t=e.total,s=e.size,n=e.baseLink,l=(0,f.useRouter)(),i=(0,p.useState)(1),c=i[0],o=i[1],d=(0,p.useState)([]),u=d[0],m=d[1],x=Math.ceil(t/s);(0,p.useEffect)(function(){var e,t,s;m((s=[c-2,c-1,c,c+1,c+2].filter(function(e){return e>1&&e<x}),5===c&&s.unshift(2),c===x-4&&s.push(x-1),c>5&&s.unshift("..."),c<x-4&&s.push("..."),[1].concat((0,r.Z)(s),[x])))},[t,s,c,x]),(0,p.useEffect)(function(){var e=l.query.page;"string"==typeof e&&parseInt(e)<=x?o(parseInt(e)):o(1)},[l.query,x]);var v=function(e,t){"..."===t&&1===e?t=c-1:"..."===t&&e===(null==u?void 0:u.length)-2&&(t=c+1)};return x>1?(0,a.jsx)("nav",{className:"border-t border-gray-200 px-4 flex items-center justify-between sm:px-0 mt-5",children:(0,a.jsx)("div",{className:"mx-auto",children:null==u?void 0:u.map(function(e,t){return(0,a.jsx)(h(),{href:"".concat(n,"?page=").concat(e),shallow:!0,children:(0,a.jsx)("a",{className:L()(c===e?"border-indigo-500 text-indigo-600 border-t-2 py-2 inline-flex items-center font-medium cursor-pointer select-none":"hover:text-gray-700 hover:border-gray-300 border-transparent text-gray-500","border-t-2 px-2.5 py-2 inline-flex items-center text-md font-medium cursor-pointer select-none"),onClick:function(){v(t,e)},children:String(e)})},t)})})}):null},E=s(25159),F=s(4668),T=s(25675),M=s.n(T),A=s(95169),D=function(){var e=(0,f.useRouter)(),t=(0,d.NT)(),s=function(){var t=e.query,s=t.customerId,n=t.historyId,r=t.teamId;e.push(n?(0,y.Z)({customerId:s,teamId:r})+"/library"+"/".concat(n,"/all"):"/",void 0,{shallow:!0,locale:e.locale})};return(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(M(),{src:A.Z,width:220,height:220,alt:"fly_man"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 font-normal",children:"You haven't generated any copies yet."}),(0,a.jsx)(F.Z,{className:"w-full mt-5 py-2.5",onClick:s,children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 text-white mr-1"}),t("New Copy")]})})]})})},R=s(10420),H=s(11355),V=s(59810),z=s(58771),O=s(98730),B=s(5618),P=function(e){var t,s=e.openModal,n=e.setOpenModal,r=e.onDelete,l=e.copyId,i=(0,v.I0)(),o=(0,f.useRouter)().query,u=o.teamId,m=o.historyId,x=o.customerId,h=o.parentHistoryId,g=(0,d.NT)(),j=(0,p.useRef)(null),y=(0,p.useState)(!1),N=y[0],I=y[1],k=(t=(0,w.Z)(function(){return(0,b.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,4,5]),I(!0),[4,i((0,B.cF)({copyId:l,teamId:u,historyId:m,customerId:x}))];case 1:return e.sent(),i((0,O.sc)({status:O.Ez.success,message:g("Copy has been unsaved successfully.")})),n(!1),[4,i((0,O.Jf)(h))];case 2:return e.sent(),r&&r(),[3,5];case 3:return e.sent(),i((0,O.sc)({status:O.Ez.failed,message:"Sorry, we weren't able to unsave the copy."})),[3,5];case 4:return I(!1),[7];case 5:return[2]}})}),function(){return t.apply(this,arguments)});return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(H.u.Root,{show:s,as:p.Fragment,children:(0,a.jsx)(V.V,{as:"div",static:!0,className:"fixed z-90 inset-0 overflow-y-auto",initialFocus:j,open:s,onClose:function(){},onClick:function(e){return e.stopPropagation()},children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,a.jsx)(H.u.Child,{as:p.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(V.V.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,a.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,a.jsx)(H.u.Child,{as:p.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,a.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,a.jsx)(z.Z,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,a.jsx)(V.V.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:g("Unsave Copy")}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:g("Are you sure you want to unsave this copy?")})})]})]}),(0,a.jsxs)("div",{className:"w-full sm:w-1/2 sm:ml-auto mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[(0,a.jsx)(F.Z,{className:"w-full sm:ml-3",onClick:k,isLoading:N,children:g("Confirm")}),(0,a.jsx)(c.I,{className:"w-full mt-3 sm:mt-0",onClick:function(){return n(!1)},children:g("Cancel")})]})]})})]})})})})},q=function(){var e=(0,f.useRouter)().query.contentCategory,t=(0,v.v9)(function(e){return e.main.categories}),s=(0,p.useState)(),n=s[0],r=s[1];return(0,p.useEffect)(function(){r(null==t?void 0:t.find(function(t){return t.package_name===e}))},[t,e]),[n]},U=s(4619),W=s(63067),K=s(42600),J=function(e){var t=e.searchKey,s=e.categories,n=(0,p.useRef)(!1),r=(0,f.useRouter)();r.locale;var l,i=r.query,c=i.page,o=i.teamId,u=i.customerId,m=(0,p.useState)([]),x=m[0],h=m[1],v=(0,p.useState)(!0),g=v[0],j=v[1],N=(0,p.useState)(1),I=N[0],k=N[1],Z=(0,p.useState)(1),_=Z[0],L=Z[1],E=(0,d.NT)();(0,p.useEffect)(function(){return n.current=!0,function(){n.current=!1}},[]);var F=(0,p.useCallback)((l=(0,w.Z)(function(e){var s,r,a,l;return(0,b.__generator)(this,function(i){switch(i.label){case 0:j(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,(0,C.L4)({teamId:o,categoryName:"all",searchKey:t,page:e,customerId:u})];case 2:return r=(s=i.sent()).items,a=s.total,l=s.size,n.current&&(h(r),k(a),L(l)),[3,5];case 3:return i.sent(),[3,5];case 4:return n.current&&j(!1),[7];case 5:return[2]}})}),function(e){return l.apply(this,arguments)}),[u,t,o]);(0,p.useEffect)(function(){var e=1;"string"==typeof c?e=parseInt(c):"object"!=typeof c&&(e=null!=c?c:1);var t=setTimeout(function(){F(e)},500);return function(){clearTimeout(t)}},[F,c]);var T=function(){F(1)};return g?(0,a.jsx)("div",{className:"relative h-full flex-1",children:(0,a.jsx)(R.Z,{})}):(null==x?void 0:x.length)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"sm:rounded-lg overflow-auto flex-1",children:(0,a.jsxs)("table",{className:"w-full divide-y divide-gray-200 mx-auto overflow-auto",children:[(0,a.jsx)("thead",{className:"bg-white",children:(0,a.jsxs)("tr",{className:"text-sm text-black-3 font-medium",children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:E("Title")}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:E("Type")}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:E("Latest Edited")}),(0,a.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,a.jsx)("span",{className:"sr-only",children:E("Edit")})})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null==x?void 0:x.map(function(e){return(0,a.jsx)(Y,{copy:e,onDelete:T,categories:s},null==e?void 0:e.id)})})]})}),(0,a.jsx)(S,{total:I,size:_,baseLink:(0,y.Z)({customerId:u,teamId:o})+"/saved-files/copies"})]}):(0,a.jsx)(D,{})},G=function(e){var t,s;return{categories:null!==(s=null===(t=e.main)||void 0===t?void 0:t.categories)&&void 0!==s?s:[]}},X=(0,v.$j)(G)(J),Y=function(e){var t,s,n,r=e.copy,l=e.categories,i=e.onDelete,c=r.id,u=r.title,m=(r.is_liked,r.content_type),x=(r.time,r.copy_data),h=r.parent_history_id,g=r.history_id,j=r.updated_date,w=(0,f.useRouter)(),b=w.locale,C=w.query,_=C.userId,L=C.teamId,S=C.customerId,E=C.historyIdFromUrl,F=(0,d.NT)(),T=(0,v.I0)(),A=(0,p.useState)(!1),D=A[0],R=A[1],H=(0,N.Z)(q(),1)[0],V=function(e){e.preventDefault();var t,s="";Object.values(null!==(t=null==x?void 0:x.data)&&void 0!==t?t:{}).forEach(function(e,t){e&&"undefined"!==e&&(s+=t?"'\n'".concat(e):e)}),(0,U.Z)(s),T((0,O.sc)({status:O.Ez.success,message:F("Text has been copied to clipboard.")})),(0,K.W)("Copy Copied to Clipboard",{userId:_,teamId:L,templateName:null==H?void 0:H.package_name,historyIdFromUrl:E})};return(null==m?void 0:m.is_visible)&&(null==l||l.forEach(function(e){var s;null==e||null===(s=e.content_types)||void 0===s||s.forEach(function(s){var n=s.content_name,r=s.content_types;if(n===(null==m?void 0:m.content_name)||(null==r?void 0:r.find(function(e){return e.content_name===(null==m?void 0:m.content_name)}))){t=e;return}})}),(null==m?void 0:m.is_visible)&&(null==x?void 0:x.id))?(0,a.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-4",onClick:function(){return w.push((0,y.Z)({customerId:S,teamId:L})+"/template/".concat(h,"/").concat(m.content_name,"/").concat(g,"?copyId=").concat(null==x?void 0:x.id),void 0,{shallow:!0})},children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,a.jsx)("div",{className:"flex justify-start items-center",children:(0,a.jsx)(Z,{children:u||F("Untitled")})})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-6 flex items-center",children:(null==m?void 0:m.image_src)&&(0,a.jsx)(M(),{src:null==m?void 0:m.image_src,width:20,height:20,alt:null==m?void 0:m.title[null!=b?b:"en"]})}),(0,a.jsx)("p",{className:"text-sm text-gray-700 ml-1",children:null==m?void 0:m.title[null!=b?b:"en"]})]}),(0,a.jsx)("div",{className:"flex justify-start items-center ml-3 mt-2",children:(null==t?void 0:t.color)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"mr-1.5 h-2.5 w-2.5",style:{color:"".concat(null!==(s=null==t?void 0:t.color)&&void 0!==s?s:"")},fill:"currentColor",viewBox:"0 0 8 8",children:(0,a.jsx)("circle",{cx:4,cy:4,r:3})}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:null==t?void 0:t.name[null!=b?b:"en"]})]})})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,W.Z)(null!=j?j:"",null!=b?b:"en")}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:function(e){e.stopPropagation(),e.preventDefault()},children:(0,a.jsxs)("div",{className:"flex items-center ml-auto",children:[(0,a.jsx)("div",{className:"px-1",children:(0,a.jsx)(o.Z,{message:F("Unsave Copy"),position:"top",children:(0,a.jsx)("button",{className:"inline-flex items-center p-1 border border-transparent rounded-full shadow-sm text-gray-3 bg-opacity-10 bg-yellow-1 focus:outline-none hover:bg-opacity-25 focus:ring-2 focus:ring-offset-2 focus:ring-yellow-200",onClick:function(e){R(!0)},children:(0,a.jsx)(I.Z,{className:"text-yellow-400 h-4 w-4","aria-hidden":"true"})})})}),(0,a.jsx)("div",{className:"px-1",children:(0,a.jsx)(o.Z,{message:F("Copy to clipboard"),position:"top",children:(0,a.jsx)("button",{className:"inline-flex items-center p-1 border border-transparent rounded-full shadow-sm text-gray-400 bg-gray-200 bg-opacity-30 focus:outline-none hover:text-purple-1 focus:ring-2 focus:ring-offset-2 focus:ring-gray-200 transition-colors",onClick:V,children:(0,a.jsx)(k.Z,{className:"h-4 w-4","aria-hidden":"true"})})})})]})}),(0,a.jsx)(P,{openModal:D,setOpenModal:R,onDelete:i,copyId:null!==(n=null==x?void 0:x.id)&&void 0!==n?n:""})]},c):null},$=function(e){var t=e.searchKey;return(0,a.jsx)(X,{searchKey:t})},Q=function(e){var t,s;return{categories:null!==(s=null===(t=e.main)||void 0===t?void 0:t.categories)&&void 0!==s?s:[]}},ee=(0,v.$j)(Q)($),et=s(26042),es=s(69396),en=s(64343),er=s(5506),ea=s(37051),el=s(11033),ei=s(5840),ec=s(97869),eo=function(e){var t=e.isOpenModal,s=e.setIsOpenModal,n=e.onSubmit,r=(0,p.useRef)(!1),l=(0,f.useRouter)().query;l.teamId,l.customerId,l.historyId;var i=(0,d.NT)(),c=(0,p.useState)("");c[0],c[1];var o=(0,p.useState)(!1),u=o[0];o[1];var m,x=function(e){s(e)};(0,p.useEffect)(function(){return r.current=!0,function(){r.current=!1}},[]);var h=(m=(0,w.Z)(function(e){var t,r;return(0,b.__generator)(this,function(t){return e.preventDefault(),n(e.currentTarget.project_name.value),s(!1),[2]})}),function(e){return m.apply(this,arguments)});return(0,a.jsx)(H.u,{appear:!0,show:t,as:p.Fragment,children:(0,a.jsxs)(V.V,{as:"div",className:"relative z-70",onClose:function(){},children:[(0,a.jsx)(H.u.Child,{as:p.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(H.u.Child,{as:p.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(V.V.Panel,{className:"transform rounded-2xl bg-white text-left align-middle shadow-xl transition-all w-full sm:w-96",children:[(0,a.jsxs)("div",{className:"flex justify-between px-6 pt-8 pb-4",children:[(0,a.jsx)(V.V.Title,{as:"h3",className:"text-2xl font-bold leading-6 text-gray-900",children:i("New Project")}),(0,a.jsx)("div",{onClick:function(){return x(!1)},className:"rounded-4xl cursor-pointer",children:(0,a.jsx)(er.Z,{className:"rounded-4xl w-6 h-6 text-gray-500 hover:text-purple-500 active:text-navy-1"})})]}),(0,a.jsx)("div",{className:"flex justify-between items-center mobile:flex-col-reverse px-6 pt-4 pb-6",children:(0,a.jsxs)("form",{className:"w-full",onSubmit:h,children:[(0,a.jsx)(el.Z,{label:i("Project name"),id:"project_name",required:!0,className:"mb-4",labelClassName:"mb-2"}),(0,a.jsx)(F.Z,{type:"submit",className:"mobile:w-full h-12 w-46 rounded-xl ml-auto",isLoading:u,children:i("Continue")})]})})]})})})})]})})},ed=s(98607);function eu(){return(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M13.4995 3.5L2.49951 3.50001",stroke:"#111827",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M6.5 6.5V10.5",stroke:"#111827",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M9.5 6.5V10.5",stroke:"#111827",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M12.4995 3.5V13C12.4995 13.1326 12.4468 13.2598 12.3531 13.3536C12.2593 13.4473 12.1321 13.5 11.9995 13.5H3.99951C3.8669 13.5 3.73973 13.4473 3.64596 13.3536C3.55219 13.2598 3.49951 13.1326 3.49951 13V3.5",stroke:"#111827",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M10.5 3.5V2.5C10.5 2.23478 10.3946 1.98043 10.2071 1.79289C10.0196 1.60536 9.76522 1.5 9.5 1.5H6.5C6.23478 1.5 5.98043 1.60536 5.79289 1.79289C5.60536 1.98043 5.5 2.23478 5.5 2.5V3.5",stroke:"#111827",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})}var em=s(86215);function ex(e){var t=e.setOpenDeleteModal,s=(0,p.useCallback)(function(e){e.stopPropagation()},[]),n=(0,p.useCallback)(function(){t(!0)},[t]);return(0,a.jsx)(em.J,{className:"relative",children:function(e){var t=e.open;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(em.J.Button,{className:(0,u.Z)(t?"text-gray-900":"text-gray-500","group inline-flex items-center rounded-md text-base font-medium appearance-none focus:outline-none ring-0 focus:ring-offset-0 focus:ring-0"),children:(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("circle",{cx:"5",cy:"10",r:"1.25",fill:"currentColor",className:"bg-gray-4 hover:bg-gray-900"}),(0,a.jsx)("circle",{cx:"10",cy:"10",r:"1.25",fill:"currentColor",className:"bg-gray-4 hover:bg-gray-900"}),(0,a.jsx)("circle",{cx:"15",cy:"10",r:"1.25",fill:"currentColor",className:"bg-gray-4 hover:bg-gray-900"})]})}),(0,a.jsx)(H.u,{as:p.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,a.jsx)(em.J.Panel,{className:"absolute -left-4 z-10 mt-3 w- -translate-x-1/2 transform px-2 sm:px-0 w-37",children:(0,a.jsx)("div",{className:"overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5",onClick:s,children:(0,a.jsx)("div",{className:"relative grid bg-white py-2",children:(0,a.jsxs)("div",{className:"flex items-center p-2 space-x-2 hover:bg-gray-4",onClick:n,children:[(0,a.jsx)(eu,{}),(0,a.jsx)("p",{children:"Delete"})]})})})})})]})}})}function eh(){return(0,a.jsx)("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M7 3H12.5C12.6326 3 12.7598 3.05268 12.8536 3.14645C12.9473 3.24021 13 3.36739 13 3.5V10.5C13 10.6326 12.9473 10.7598 12.8536 10.8536C12.7598 10.9473 12.6326 11 12.5 11H1.5C1.36739 11 1.24021 10.9473 1.14645 10.8536C1.05268 10.7598 1 10.6326 1 10.5V4.5M7 3L5.13125 1.6C5.04449 1.53549 4.93936 1.50044 4.83125 1.5H1.5C1.36739 1.5 1.24021 1.55268 1.14645 1.64645C1.05268 1.74021 1 1.86739 1 2V4.5M7 3L5.13125 4.4C5.04449 4.46451 4.93936 4.49956 4.83125 4.5H1",stroke:"#111827",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}var ef=function(e){var t,s,n;return{categories:null===(t=e.main)||void 0===t?void 0:t.categories,userId:null===(s=e.user)||void 0===s?void 0:s.id,lengthOfSavedCopies:null===(n=e.main)||void 0===n?void 0:n.lengthOfSavedCopies}},ep=(0,v.$j)(ef)(function(e){var t=e.categories,s=e.userId,n=e.searchKey,r=e.isOpenCreateFolderModal,l=e.setIsOpenCreateFolderModal,c=e.lengthOfSavedCopies,o=(0,p.useRef)(!1),u=(0,f.useRouter)();u.locale;var m=u.query,x=m.teamId,g=m.historyId,j=m.customerId,N=m.page,I=(0,v.I0)(),k=(0,p.useState)([]),C=k[0],Z=k[1],_=(0,p.useState)(!0),L=_[0],E=_[1],F=(0,p.useState)(1),T=F[0],M=F[1],A=(0,p.useState)(1),H=A[0],V=A[1],z=(0,p.useRef)(),B=(0,p.useState)(!1),P=(B[0],B[1]),q=(0,p.useState)(!1),U=(q[0],q[1]),W=(0,p.useState)([]),K=W[0];W[1];var J,G=(0,d.NT)();(0,p.useEffect)(function(){return o.current=!0,function(){o.current=!1}},[]),(0,p.useLayoutEffect)(function(){var e=K.length>0&&K.length<C.length;P(K.length===C.length),U(e),z.current={indeterminate:e}},[C.length,K]);var X=(0,p.useCallback)((J=(0,w.Z)(function(e){var t,s,r,a,l;return(0,b.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),E(!0),[4,(0,i.zZ)({teamId:x,categoryName:"all",searchKey:n,page:e,customerId:j,historyId:g})];case 1:return s=(t=c.sent()).items,r=t.total,a=t.size,o.current&&(Z(s),M(r),V(a),E(!1)),[3,3];case 2:return c.sent(),o.current&&E(!1),l="".concat((0,y.Z)({customerId:j,teamId:x}),"/saved-files/folders"),u.asPath!==l&&u.push(l,void 0,{shallow:!0}),[3,3];case 3:return[2]}})}),function(e){return J.apply(this,arguments)}),[j,g,u,n,x]);(0,p.useEffect)(function(){var e=1;"string"==typeof N?e=parseInt(N):"object"!=typeof N&&(e=null!=N?N:1);var t=setTimeout(function(){X(e)},500);return function(){clearTimeout(t)}},[X,N]);var Y,$=function(e){I((0,O.Jf)({team_id:x})),void 0===N||"1"===N?X(1):u.push("".concat((0,y.Z)({customerId:j,teamId:x}),"/saved-files/folders/").concat(g),void 0,{shallow:!0})},Q=(Y=(0,w.Z)(function(e){var t,s;return(0,b.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,i.fi)({teamId:x,customerId:j,title:e,parentId:g})];case 1:return t=n.sent(),I((0,O.br)(t)),I((0,O.sc)({status:O.Ez.success,message:"Project ".concat(e," has been created successfully.")})),void 0===N||"1"===N?X(1):u.push("".concat((0,y.Z)({customerId:j,teamId:x}),"/saved-files/folders/").concat(g),void 0,{shallow:!0}),[3,3];case 2:return s=n.sent(),I((0,O.sc)({status:O.Ez.failed,message:(0,ed.Z)(s)})),[3,3];case 3:return[2]}})}),function(e){return Y.apply(this,arguments)}),ee=(0,p.useCallback)(function(){u.push("\n      ".concat((0,y.Z)({customerId:j,teamId:x}),"/saved-files/copies").concat(g?"?history_id=".concat(g):""),void 0,{shallow:!0})},[j,x,g,u]);return L?(0,a.jsx)("div",{className:"relative h-full flex-1",children:(0,a.jsx)(R.Z,{})}):(0,a.jsxs)(a.Fragment,{children:[Boolean(null==C?void 0:C.length)||Boolean(!g)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"sm:rounded-lg overflow-auto flex-1",children:(0,a.jsxs)("table",{className:"w-full divide-y divide-gray-200 mx-auto overflow-auto text-sm font-normal text-black-3",children:[(0,a.jsx)("thead",{className:"bg-white",children:(0,a.jsxs)("tr",{className:"text-sm text-black-3 font-medium",children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:G("Title")}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:G("Owner")}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:G("Type")}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:G("Status")}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:G("Last edited")}),(0,a.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,a.jsx)("span",{className:"sr-only",children:G("Edit")})})]})}),(0,a.jsxs)("tbody",{className:"bg-white divide-y divide-gray-1",children:[(Boolean(!N)||"1"===N)&&Boolean(!g)&&(0,a.jsx)("tr",{className:"cursor-pointer hover:bg-gray-4",onClick:ee,children:(0,a.jsx)("td",{colSpan:6,className:"whitespace-nowrap text-sm font-medium text-black-3",children:(0,a.jsx)(h(),{href:"\n                      ".concat((0,y.Z)({customerId:j,teamId:x}),"/saved-files/copies").concat(g?"?history_id=".concat(g):""),children:(0,a.jsx)("a",{target:"",children:(0,a.jsxs)("div",{className:"px-6 py-4 flex items-center",children:[(0,a.jsx)("div",{className:"w-6 flex items-center",children:(0,a.jsx)(eh,{})}),(0,a.jsxs)("p",{className:"text-sm ml-1",children:[G("Saved Copies")," - ",c]})]})})})})}),null==C?void 0:C.map(function(e){return(0,a.jsx)(ev,{history:e,selectedHistories:K,userId:s,onDeleted:$,filterItems:C,addItems:Z,categories:t},e.id)})]})]})}),(0,a.jsx)(S,{total:T,size:H,baseLink:"".concat((0,y.Z)({customerId:j,teamId:x}),"/saved-files/folders").concat(g?"/".concat(g):"")})]}):(0,a.jsx)(D,{}),(0,a.jsx)(eo,{isOpenModal:r,setIsOpenModal:l,onSubmit:Q})]})});function ev(e){var t,s,n,r,l,m=e.history,x=e.selectedHistories,g=e.userId,j=e.onDeleted,w=e.filterItems,N=e.addItems,b=e.categories,I=(0,f.useRouter)(),k=I.query,C=I.locale,Z=k.historyId,_=k.teamId,L=k.customerId,S=(0,v.I0)(),E=(0,d.NT)(),F=(0,p.useRef)(null),T=(0,p.useState)(!1),A=T[0],D=T[1],R=(0,p.useState)(!1),H=R[0],V=R[1],z=(0,p.useState)(""),P=z[0],q=z[1],U=(0,p.useState)(null!==(t=null==m?void 0:m.title)&&void 0!==t?t:""),J=U[0],G=U[1],X=m.id,Y=m.title,$=m.content_type,Q=m.time,ee=m.creator_id,eo=m.creator_name,em=m.num_copies,ef=m.num_words;m.num_messages,(0,p.useEffect)(function(){var e=function(e){F.current&&!F.current.contains(e.target)&&V(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[F]);var ep=(0,p.useCallback)(function(){S((0,B.U_)(!0));var e,t=null!==(e=null==$?void 0:$.title[null!=C?C:"en"])&&void 0!==e?e:"";(0,K.W)("Copy History Viewed",{historyId:Z,userId:g,teamId:_,templateName:t})},[S,_,g,null==$?void 0:$.title,Z,C]);(0,p.useEffect)(function(){var e=(0,y.Z)({customerId:L,teamId:_});q($?"".concat((0,y.Z)({customerId:L,teamId:_}),"/template/").concat(null==Z?void 0:Z.toString(),"/").concat(null==$?void 0:$.content_name.toString(),"/").concat(X).concat(ei.sK===(null==$?void 0:$.content_name.toString())?"?filter=all&page=1":""):"".concat((0,y.Z)({customerId:L,teamId:_}),"/saved-files/folders/").concat(X))},[X,$,L,Z,C,_,ep,]),(0,p.useCallback)(function(e){e.stopPropagation(),V(!0)},[]);var ev=function(){var e=w.map(function(e){return(null==e?void 0:e.id)===X?(0,es.Z)((0,et.Z)({},e),{title:J}):e});N(e),(0,i.r1)({historyId:X,title:J,customerId:L,teamId:_}).then(function(e){$||S((0,O.xX)(e))}).catch(function(e){S((0,O.sc)({status:O.Ez.failed,message:(0,ed.Z)(e)}))}).finally(function(){V(!1)})};null==b||b.forEach(function(e){var t;null==e||null===(t=e.content_types)||void 0===t||t.forEach(function(t){var n=t.content_name,r=t.content_types;if(n===(null==$?void 0:$.content_name)||(null==r?void 0:r.find(function(e){return e.content_name===(null==$?void 0:$.content_name)}))){s=e;return}})});var eg=x.includes(m);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:(0,u.Z)("group cursor-pointer text-black-3",eg?"bg-gray-4":"hover:bg-gray-4"),onClick:ep,children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-black-3 ",children:$?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-6 flex items-center",children:(null==$?void 0:$.image_src)&&(0,a.jsx)(M(),{src:null==$?void 0:$.image_src,width:20,height:20,alt:Y})}),H?(0,a.jsxs)("div",{onClick:function(e){return e.stopPropagation()},ref:F,className:"flex items-center space-x-2 px-1",children:[(0,a.jsx)(el.Z,{inputClassName:"py-1 text-sm font-medium text-black-3 rounded-lg",value:J,onChange:function(e){return G(null!==(n=e.target.value)&&void 0!==n?n:"")}}),(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,a.jsx)(c.I,{className:"px-1 py-1",onClick:ev,children:(0,a.jsx)(en.Z,{className:"w-6 h-6 text-purple-1"})}),(0,a.jsx)(c.I,{className:"px-1 py-1",onClick:function(){return V(!1)},children:(0,a.jsx)(er.Z,{className:"w-6 h-6 text-red-600"})})]})]}):(0,a.jsx)(h(),{href:null!=P?P:"",children:(0,a.jsx)("a",{target:"",children:(0,a.jsx)("p",{className:"text-sm ml-1",children:Y||"Untitled"})})})]}):(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-6 flex items-center",children:(0,a.jsx)(eh,{})}),H?(0,a.jsxs)("div",{onClick:function(e){return e.stopPropagation()},ref:F,className:"flex items-center space-x-2 px-1",children:[(0,a.jsx)(el.Z,{inputClassName:"py-1 text-sm font-medium text-black-3 rounded-lg",value:J,onChange:function(e){return G(null!==(r=e.target.value)&&void 0!==r?r:"")}}),(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,a.jsx)(c.I,{className:"px-1 py-1",onClick:ev,children:(0,a.jsx)(en.Z,{className:"w-6 h-6 text-purple-1"})}),(0,a.jsx)(c.I,{className:"px-1 py-1",onClick:function(){return V(!1)},children:(0,a.jsx)(er.Z,{className:"w-6 h-6 text-red-600"})})]})]}):(0,a.jsx)(h(),{href:null!=P?P:"",children:(0,a.jsx)("a",{target:"",children:(0,a.jsx)("p",{className:"text-sm ml-1 py-1",children:Y})})})]})}),(0,a.jsx)("td",{children:(0,a.jsx)(h(),{href:null!=P?P:"",children:(0,a.jsx)("a",{target:"",children:(0,a.jsx)("div",{className:"px-6 py-4 whitespace-nowrap",children:g===ee?"Me":eo})})})}),(0,a.jsx)("td",{children:(0,a.jsx)(h(),{href:null!=P?P:"",children:(0,a.jsx)("a",{target:"",children:(0,a.jsxs)("div",{className:"px-6 py-3 whitespace-nowrap text-sm font-medium text-gray-900 cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-6 flex items-center",children:(null==$?void 0:$.image_src)&&(0,a.jsx)(M(),{src:null==$?void 0:$.image_src,width:20,height:20,alt:null==$?void 0:$.title[null!=C?C:"en"]})}),(0,a.jsx)("p",{className:"text-sm text-gray-700 ml-1",children:null==$?void 0:$.title[null!=C?C:"en"]})]}),(0,a.jsx)("div",{className:"flex justify-start items-center ml-3 mt-1",children:s&&(null==s?void 0:s.color)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"mr-1.5 h-2.5 w-2.5",style:{color:"".concat(null!==(l=null==s?void 0:s.color)&&void 0!==l?l:"")},fill:"currentColor",viewBox:"0 0 8 8",children:(0,a.jsx)("circle",{cx:4,cy:4,r:3})}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:null==s?void 0:s.name[null!=C?C:"en"]})]})})]})})})}),(0,a.jsx)("td",{children:(0,a.jsx)(h(),{href:null!=P?P:"",children:(0,a.jsx)("a",{target:"",children:(0,a.jsx)("div",{className:"px-6 py-4 whitespace-nowrap",children:$&&(0,a.jsx)("span",{className:"text-sm text-gray-800 font-medium bg-gray-200 px-2 py-0.5 rounded-full",children:(null==$?void 0:$.content_name)===ei.Et?"".concat(null!=ef?ef:0," ").concat(E(" words")):"".concat(null!=em?em:0," ").concat(E(" copies"))})})})})}),(0,a.jsx)("td",{children:(0,a.jsx)(h(),{href:null!=P?P:"",children:(0,a.jsx)("a",{target:"",children:(0,a.jsx)("div",{className:"px-6 py-4 whitespace-nowrap",children:(0,W.Z)(null!=Q?Q:"",null!=C?C:"en")})})})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsxs)("div",{className:"hidden lg:flex items-center space-x-6",children:[(0,a.jsx)(o.Z,{message:E("Rename"),position:"top",children:(0,a.jsx)(ea.Z,{className:"w-4 h-4 hover:text-purple-1",onClick:function(e){e.stopPropagation(),V(!0)}})}),(0,a.jsx)(o.Z,{message:E("Delete"),position:"top",children:(0,a.jsx)("p",{className:"hover:text-red-800",onClick:function(e){D(!0),e.stopPropagation()},children:(0,a.jsx)(eu,{})})})]}),(0,a.jsx)("div",{className:"block lg:hidden",children:(0,a.jsx)(ex,{id:X,setOpenDeleteModal:D})})]})})]},X),(0,a.jsx)(ec.Z,{onDeleted:j,selectedHistoryId:X,openModal:A,setOpenModal:D})]})}var eg=s(22600),ej=s(38945),ey=s(83524),ew=s(15077),eN=s(7056),eb=s(17125),eI=s.n(eb),ek=function(e){var t=e.contentType,s=e.historyId,n=e.parentHistoryId,r=e.setOpenDeleteModal,l=e.setIsEdit,i=(0,f.useRouter)().query,c=i.teamId,o=i.customerId,u=(0,d.NT)();(0,v.I0)();var m=(0,N.Z)(p.useState(null),2),x=m[0],g=m[1],j=function(e){g(e.currentTarget)},w=function(){g(null)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{onClick:j,className:"cursor-pointer",children:(0,a.jsx)(ey.Z,{className:"h-5"})}),(0,a.jsxs)(ew.Z,{id:"simple-menu",anchorEl:x,keepMounted:!0,open:Boolean(x),onClose:w,children:[(0,a.jsxs)(eN.Z,{onClick:function(){w(),l(!0)},children:[(0,a.jsx)(ea.Z,{className:"w-4 text-gray-500"}),(0,a.jsx)("span",{className:"ml-1 text-sm text-gray-600 ".concat(eI().item),children:u("Rename")})]}),(0,a.jsx)(eN.Z,{onClick:function(){w()},children:(0,a.jsx)(h(),{href:(0,y.Z)({customerId:o,teamId:c})+"/template/".concat(n,"/").concat(t,"/").concat(s,"?filter=all"),shallow:!0,children:(0,a.jsxs)("a",{className:"flex",children:[(0,a.jsx)(eg.Z,{className:"w-4 text-gray-500"}),(0,a.jsx)("span",{className:"ml-1 text-sm text-gray-600 ".concat(eI().item),children:u("View")})]})})}),(0,a.jsxs)(eN.Z,{onClick:function(){w(),r(!0)},children:[(0,a.jsx)(ej.Z,{className:"w-4 text-gray-500"}),(0,a.jsx)("span",{className:"ml-1 text-sm text-gray-600 ".concat(eI().item),children:u("Delete")})]})]})]})})},eC=function(e){var t=e.categories,s=e.userId,n=e.searchKey,r=(0,p.useRef)(!1),l=(0,f.useRouter)();l.locale;var c,o=l.query,u=o.teamId,m=o.customerId,x=o.page,h=(0,v.I0)(),g=(0,p.useState)([]),j=g[0],N=g[1],I=(0,p.useState)(!0),k=I[0],C=I[1],Z=(0,p.useState)(1),_=Z[0],L=Z[1],E=(0,p.useState)(1),F=E[0],T=E[1],M=(0,d.NT)(),A=(0,p.useState)();A[0],A[1],(0,p.useEffect)(function(){return r.current=!0,function(){r.current=!1}},[]);var H=(0,p.useCallback)((c=(0,w.Z)(function(e){var t,s,a,l;return(0,b.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),C(!0),[4,(0,i.ww)({teamId:u,categoryName:"all",searchKey:n,page:e,customerId:m})];case 1:return s=(t=c.sent()).items,a=t.total,l=t.size,r.current&&(N(s),L(a),T(l),C(!1)),[3,3];case 2:return c.sent(),r.current&&C(!1),[3,3];case 3:return[2]}})}),function(e){return c.apply(this,arguments)}),[m,n,u]);(0,p.useEffect)(function(){var e=1;"string"==typeof x?e=parseInt(x):"object"!=typeof x&&(e=null!=x?x:1);var t=setTimeout(function(){H(e)},500);return function(){clearTimeout(t)}},[H,x]);var V=function(e){h((0,O.Jf)({team_id:u})),(void 0===x||"1"===x)&&H(1)};return k?(0,a.jsx)("div",{className:"relative h-full flex-1",children:(0,a.jsx)(R.Z,{})}):(null==j?void 0:j.length)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"sm:rounded-lg overflow-auto flex-1",children:(0,a.jsxs)("table",{className:"w-full divide-y divide-gray-200 mx-auto overflow-auto",children:[(0,a.jsx)("thead",{className:"bg-white",children:(0,a.jsxs)("tr",{className:"text-sm text-black-3 font-medium",children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:M("Title")}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:M("Owner")}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:M("Type")}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:M("Status")}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-gray-500 tracking-wider",children:M("Latest Edited")}),(0,a.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,a.jsx)("span",{className:"sr-only",children:M("Edit")})})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null==j?void 0:j.map(function(e){return(0,a.jsx)(eL,{history:e,categories:t,onDeleted:V,userId:s,filterItems:j,addItems:N},null==e?void 0:e.id)})})]})}),(0,a.jsx)(S,{total:_,size:F,baseLink:(0,y.Z)({customerId:m,teamId:u})+"/saved-files/files"})]}):(0,a.jsx)(D,{})},eZ=function(e){var t,s;return{categories:null===(t=e.main)||void 0===t?void 0:t.categories,userId:null===(s=e.user)||void 0===s?void 0:s.id}},e_=(0,v.$j)(eZ)(eC),eL=function(e){var t,s,n,r=e.history,l=e.categories,o=e.onDeleted,u=e.userId,m=e.filterItems,x=e.addItems,g=r.id,j=r.title,w=r.is_liked,N=r.content_type,b=r.num_copies,I=r.num_words,k=(r.num_messages,r.time),C=r.parent_id,_=r.creator_id,L=r.creator_name,S=(0,f.useRouter)(),E=S.locale,F=S.query,T=F.teamId,A=F.customerId,D=(0,d.NT)(),R=(0,v.I0)(),H=(0,p.useState)(!1),V=H[0],z=H[1],B=(0,p.useState)(!1),P=B[0],q=B[1],U=(0,p.useState)(null!=j?j:""),K=U[0],J=U[1],G=(0,p.useRef)(null),X=(0,p.useState)(""),Y=X[0],$=X[1];if((0,p.useEffect)(function(){var e=function(e){G.current&&!G.current.contains(e.target)&&z(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[G]),(0,p.useEffect)(function(){var e;$((0,y.Z)({customerId:A,teamId:T})+"/template/".concat(C,"/").concat(null==N?void 0:N.content_name,"/").concat(g).concat((null==N?void 0:N.content_name)===ei.sK?"?filter=all&page=1":""))},[null==N?void 0:N.content_name,A,g,C,T]),!(null==N?void 0:N.is_visible))return null;null==l||l.forEach(function(e){var s;null==e||null===(s=e.content_types)||void 0===s||s.forEach(function(s){var n=s.content_name,r=s.content_types;if(n===(null==N?void 0:N.content_name)||(null==r?void 0:r.find(function(e){return e.content_name===(null==N?void 0:N.content_name)}))){t=e;return}})});var Q=function(){var e=m.map(function(e){return(null==e?void 0:e.id)===g?(0,es.Z)((0,et.Z)({},e),{title:K}):e});x(e),(0,i.r1)({historyId:g,title:K,customerId:A,teamId:T}).then(function(e){}).catch(function(e){R((0,O.sc)({status:O.Ez.failed,message:(0,ed.Z)(e)}))}).finally(function(){z(!1)})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-4",children:[(0,a.jsx)("td",{className:"whitespace-nowrap text-sm font-medium text-gray-900",children:(0,a.jsxs)("div",{className:"flex justify-start items-center",children:[(0,a.jsx)(h(),{href:null!=Y?Y:"",children:(0,a.jsx)("a",{target:"",className:"pl-6 py-8",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-500",fill:w?"rgba(245, 158, 11, var(--tw-text-opacity))":"none",viewBox:"0 0 24 24",stroke:w?"rgba(245, 158, 11, var(--tw-text-opacity))":"rgba(156, 163, 175, var(--tw-text-opacity))",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}),V?(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-7.5",onClick:function(e){e.stopPropagation(),e.preventDefault()},ref:G,children:[(0,a.jsx)(el.Z,{inputClassName:"py-1 text-sm font-medium text-black-3 rounded-lg",value:K,onChange:function(e){return J(null!==(s=e.target.value)&&void 0!==s?s:"")},autoFocus:!0}),(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,a.jsx)(c.I,{className:"px-1 py-1",onClick:Q,children:(0,a.jsx)(en.Z,{className:"w-6 h-6 text-purple-1"})}),(0,a.jsx)(c.I,{className:"px-1 py-1",onClick:function(){return z(!1)},children:(0,a.jsx)(er.Z,{className:"w-6 h-6 text-red-600"})})]})]}):(0,a.jsx)(h(),{href:null!=Y?Y:"",children:(0,a.jsx)("a",{target:"",className:"w-fill h-fill",children:(0,a.jsx)(Z,{children:j||D("Untitled")})})})]})}),(0,a.jsx)("td",{className:"whitespace-nowrap",children:(0,a.jsx)(h(),{href:null!=Y?Y:"",children:(0,a.jsx)("a",{target:"",className:"px-6 py-7",children:u===_?"Me":L})})}),(0,a.jsx)("td",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-pointer",children:(0,a.jsx)(h(),{href:null!=Y?Y:"",children:(0,a.jsx)("a",{target:"",children:(0,a.jsxs)("div",{className:"px-6 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-6 flex items-center",children:(null==N?void 0:N.image_src)&&(0,a.jsx)(M(),{src:null==N?void 0:N.image_src,width:20,height:20,alt:null==N?void 0:N.title[null!=E?E:"en"]})}),(0,a.jsx)("p",{className:"text-sm text-gray-700 ml-1",children:null==N?void 0:N.title[null!=E?E:"en"]})]}),(0,a.jsx)("div",{className:"flex justify-start items-center ml-3 mt-2",children:t&&(null==t?void 0:t.color)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"mr-1.5 h-2.5 w-2.5",style:{color:"".concat(null!==(n=null==t?void 0:t.color)&&void 0!==n?n:"")},fill:"currentColor",viewBox:"0 0 8 8",children:(0,a.jsx)("circle",{cx:4,cy:4,r:3})}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:null==t?void 0:t.name[null!=E?E:"en"]})]})})]})})})}),(0,a.jsx)("td",{className:"whitespace-nowrap ",children:(0,a.jsx)(h(),{href:null!=Y?Y:"",children:(0,a.jsx)("a",{target:"",className:"px-6 py-6",children:(0,a.jsx)("span",{className:"text-sm text-gray-800 font-medium bg-gray-200 px-2 py-0.5 rounded-full",children:(null==N?void 0:N.content_name)===ei.Et?"".concat(null!=I?I:0," ").concat(D("words")):"".concat(b," ").concat(D("copies"))})})})}),(0,a.jsx)("td",{className:"whitespace-nowrap text-sm text-gray-500",children:(0,a.jsx)(h(),{href:null!=Y?Y:"",children:(0,a.jsx)("a",{target:"",className:"px-6 py-6",children:(0,W.Z)(null!=k?k:"",null!=E?E:"en")})})}),(0,a.jsx)("td",{className:"whitespace-nowrap text-right text-sm font-medium",onClick:function(e){e.stopPropagation(),e.preventDefault()},children:(0,a.jsx)("div",{className:"text-gray-600 hover:text-gray-900",children:(0,a.jsx)(ek,{contentType:null==N?void 0:N.content_name,historyId:g,parentHistoryId:C,setOpenDeleteModal:q,setIsEdit:z})})})]},g),(0,a.jsx)(ec.Z,{onDeleted:o,selectedHistoryId:g,openModal:P,setOpenModal:q})]})},eS=function(e){var e=null!==e?e:(0,n.Z)(TypeError("Cannot destructure undefined"));(0,v.I0)();var t=(0,f.useRouter)(),s=t.query,d=s.customerId,x=s.teamId,w=s.viewType,N=s.historyId,b=s.history_id,I=(0,p.useState)(""),k=I[0],C=I[1],Z=(0,p.useState)([]),_=Z[0],L=Z[1],S=(0,p.useState)(!1),E=S[0],F=S[1],T="transition text-sm font-bold rounded-xb-large px-4 py-2 flex justify-center items-center w-full";(0,p.useEffect)(function(){var e={id:"-1",title:(0,g.Z)("files"===w?"files":"folders")};if(!N||"string"!=typeof N){"copies"===w?L([e,{id:"-2",title:"Saved Copies"}]):L([e]);return}(0,i.IM)(N).then(function(t){L([e].concat((0,r.Z)(t)))}).catch(function(e){})},[N,w]);var M=function(){var e=t.query,s=e.customerId,n=e.historyId,r=e.teamId;t.push((0,y.Z)({customerId:s,teamId:r})+"/library/".concat(n)+"/all",void 0,{shallow:!0,locale:t.locale})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,u.Z)("flex items-center px-6 space-x-2 text-gray-6 text-sm"),children:[(0,a.jsx)("p",{children:"History"}),null==_?void 0:_.map(function(e,t){var s=e.id,n=e.title;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("svg",{width:"5",height:"8",viewBox:"0 0 5 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M1.25 1L4.25 4L1.25 7",stroke:"#6B7280",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,a.jsx)(h(),{href:(0,y.Z)({customerId:d,teamId:x})+"/saved-files/".concat("copies"===w&&0===t?"folders":w)+((0,j.Z)(s)?"/".concat(s):""),shallow:!0,children:(0,a.jsx)("a",{children:(0,a.jsx)("p",{className:t+1===(null==_?void 0:_.length)?"text-black-3 font-bold":"",children:n})})})]},s)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center px-6 pt-9.5 pb-3 lg:pb-10.7",children:["copies"!==w&&!N&&(0,a.jsxs)("div",{className:"grid grid-cols-2 border border-gray-1 p-0.5 rounded-xb-large",children:[(0,a.jsx)(h(),{shallow:!0,href:"".concat((0,y.Z)({customerId:d,teamId:x}),"/saved-files/folders")+(b?"/".concat(b):""),children:(0,a.jsx)("a",{children:(0,a.jsx)("button",{className:(0,u.Z)(T,"folders"===w?"bg-purple-1 text-white":"bg-white text-gray-6"),children:"Folder view"})})}),(0,a.jsx)(h(),{shallow:!0,href:"".concat((0,y.Z)({customerId:d,teamId:x}),"/saved-files/files")+(N?"?history_id=".concat(N):""),children:(0,a.jsx)("a",{children:(0,a.jsx)("button",{className:(0,u.Z)(T,"files"===w?"bg-purple-1 text-white":"bg-white text-gray-6"),children:"List view"})})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-auto",children:[(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)(m,{value:k,onChange:C})}),"folders"===w&&(0,a.jsxs)(a.Fragment,{children:[!N&&(0,a.jsx)(c.I,{className:"text-gray-6 px-2",onClick:function(){return F(!0)},children:(0,a.jsx)(o.Z,{message:"Create Folder",position:"bottom",children:(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M10 6.25H16.875C17.0408 6.25 17.1997 6.31585 17.3169 6.43306C17.4342 6.55027 17.5 6.70924 17.5 6.875V15.625C17.5 15.7908 17.4342 15.9497 17.3169 16.0669C17.1997 16.1842 17.0408 16.25 16.875 16.25H3.125C2.95924 16.25 2.80027 16.1842 2.68306 16.0669C2.56585 15.9497 2.5 15.7908 2.5 15.625V8.125",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M7.28906 8.125H2.5V5C2.5 4.83424 2.56585 4.67527 2.68306 4.55806C2.80027 4.44085 2.95924 4.375 3.125 4.375H7.28906C7.4242 4.37556 7.55562 4.41936 7.66406 4.5L10 6.25L7.66406 8C7.55562 8.08064 7.4242 8.12444 7.28906 8.125V8.125Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),"\xe5\xe5",(0,a.jsx)("path",{d:"M8.125 11.5625H11.875",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M10 9.6875V13.4375",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})}),(0,a.jsx)(c.I,{className:"text-gray-6 px-2",onClick:M,children:(0,a.jsx)(o.Z,{message:"Create File",position:"bottom",children:(0,a.jsx)(l.Z,{width:20,height:20})})})]})]})]}),(0,a.jsx)("div",{className:"block lg:hidden px-6 pb-4 w-full md:w-auto",children:(0,a.jsx)(m,{value:k,onChange:C,className:"ml-auto"})}),"files"===w&&(0,a.jsx)(e_,{searchKey:k}),"folders"===w&&(0,a.jsx)(ep,{searchKey:k,isOpenCreateFolderModal:E,setIsOpenCreateFolderModal:F}),"copies"===w&&(0,a.jsx)(ee,{searchKey:k})]})}},63067:function(e,t,s){"use strict";function n(e,t,s){if(!e)return"None";var n=new Date(e.replace(/ UTC/g,"Z").replace(/\s/,"T")),r=n.toLocaleString("us-en",{year:"numeric"}),a=n.toLocaleString(t,{month:"long"}),l=n.toLocaleString("us-en",{day:"2-digit"}),i=n.toLocaleString("us-en",{hour:"2-digit",minute:"2-digit",hour12:!1});return s?"".concat(a," ").concat(l,", ").concat(r):"".concat(a," ").concat(l,", ").concat(r," @ ").concat(i)}s.d(t,{Z:function(){return n}})},17125:function(e){e.exports={item:"edit_item__UXCtU"}}}]);